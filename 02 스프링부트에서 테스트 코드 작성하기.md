02 스프링부트에서 테스트 코드 작성하기
=======================
견고한 서비스를 만들고자 하면 **TDD** 또는 **최소한의 테스트 코드는 작성해야한다**   
# 1. 테스트코드 소개
학습에 앞서 한가지 짚고 넘어갈 점이 있는데 바로 **TDD**와 **단위테스트**는 **다른이야기**이다.   

## 1.1. TDD 와 단위테스트
TDD는 테스트가 주도하는 개발을 의미     
즉, 테스트 코드를 먼저 작성하는것부터 시작한다.     
![TDD](https://user-images.githubusercontent.com/50267433/79682794-2821da80-8260-11ea-87eb-61cd1eef3b80.png)

1. 항상 실패하는 테스트를 먼저 작성   
2. 테스트가 통과하는 프로덕션 코드를 작성    
3. 테스트가 통과하면 프로덕션 코드를 리팩토링한다.    
   
단위테스트는 TDD의 첫번째 단계인 **기능단위의 테스트 코드를 작성하는 것**을 의미한다.     
이번 장에서는 단위 테스트 코드만 배울터이니 TDD를 배워보고 싶다면 아래 사이트를 참고해보자        
https://repo.yona.io/doortts/blog/issue/1

단위 테스트를 진행하는 것은 많은 이유가 있고 이는 정보처리기사를 통해 배웠으므로     
현재 스프링부트 관점에서 사용하는 이유를 말해보자면        

* 빠른 피드백 -> 서버를 재실행 하지 않아도 된다,  
* 로그나 sysout을 통해 확인한 것을 자동검증을 통해 편하게 테스팅   
* 개발자가 만든 기능을 안전하게 보호 (하나의 기능 추가시 기존 기능이 문제가 생길 수 있음)   
더군다나 이는 규모가 클수록 전부다 검사를 진행하기가 힘들다.   
  
## 1.2. HelloController 테스트 코드 작성 
1. 패키지 생성 : 패키지명은 웹 사이트 주소의 역순으로 해주는 것이 일반적이다.    
2. Application.class 작성 
**Application.class.class**
```java

```
**코드 리뷰**
```
@SpringBootApplication어노테이션을 이용하여      
1. **스프링 부트 자동설정**    
2. **스프링 Bean 읽기와 생성을 모두 자동으로 설정**       
특히나 @SpringBootApplication이 위치한 클래스로부터 설정을 읽어나가기 때문에        
@SpringBootApplication이 위치한 클래스를 다른 클래스보다 프로젝트의 최상단에 위치시켜야한다.        
___________________________________________________________________________________________________   
SpringApplication.run 을 이용하여 내장 WAS(spring)를 실행시킨다.        
이렇게 사용할 경우 Tomcat을 사용할 필요가 없으니 어떤 환경에서든지 단순 jar로만 배포가 가능하다
```

3. HelloController 작성    
    
**HelloController**
```java

```
**코드 리뷰**
```
@RestController
* 컨트롤러를 JSON으로 반환하는 컨트롤러로 만들어준다.(즉, 값을 반환했다 보면 된다.)
* 예전에는 @ResponseBody를 각 메소드마다 선언했던 것을 한번에 사용할 수 있게 해준거이라 생각하면 된다.

참고로 기존 @Controller 는 String이나 Model로 반환시에 해당 이름의 파일을 호출했다.  
___________________________________________________________________________________________________
@GetMapping
* HTTP Method인 Get의 요청을 받을 수 있는 API를 만들어준다.  
* 예전에는 @RequestMapping(method = RequsetMethod.GET)으로 사용했었다.  
```
4. HelloControllerTest.class 작성    
    
**HelloControllerTest.class**
```java
```
**코드 리뷰**
```
@RunWith(SpringRunner.class)
* 테스트를 진행할 때 JUnit에 내장된 실행자 외에 다른 실행자를 실행시킵니다.  
* 해당 코드에서는 SpringRunner라는 스프링 실행자를 실행 -> 서버 구동 역할
* 즉, 스프링 부트 테스트와 JUnit 사이에 연결자 역할을 한 것이다.  
___________________________________________________________________________________________________
@WebMvcTest
* 여러 스프링 테스트 어노테이션 중, Web(Spring MVC)에 집중할 수 있는 어노테이션 
* @Controller , @ControllerAdvice 등을 사용할 수 있다.     
* 단, @Service , @Component , @Repository등은 사용할 수 없다.   
* 즉, 컨트롤러에 관해서 테스팅 해주는 것이고 여기서는 Controller 테스트하기에 선언해준다.     
다른 어노테이션 사용을 추가로 원하면 다른 어노테이션을 더 설정해주면 된다.
___________________________________________________________________________________________________
@Autowired
* 스프링이 관리하는 빈(bean-객체)을 주입받는다.
___________________________________________________________________________________________________
@private MockMVC mvc

```

### 1.2.1. 내용1
```
내용1
```

***
# 2. 대주제
> 인용
## 2.1. 소 주제
### 2.1.1. 내용1
```
내용1
```   

***
# 3. 대주제
> 인용
## 3.1. 소 주제
### 3.1.1. 내용1
```
내용1
```
